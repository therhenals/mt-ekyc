import{r as i,c as t,h as o}from"./p-a0ba24ee.js";const s=":host{display:block}.video-container{position:relative;width:100%;padding-top:62%;overflow:hidden;border-radius:8px}video{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;border-radius:8px}img{width:100%;border-radius:8px}";const e=class{constructor(o){i(this,o);this.photoTaked=t(this,"photoTaked",7)}componentDidLoad(){this.play()}async play(){const i=await navigator.mediaDevices.getUserMedia({video:{width:{min:1280,ideal:1920,max:2560},height:{min:720,ideal:1080,max:1440},facingMode:"environment"}});this.camera.srcObject=i;await this.camera.play()}takePhoto(){const i=document.createElement("canvas");const t=3;i.width=this.camera.clientWidth*t;i.height=this.camera.clientHeight*t;const o=this.camera.videoWidth/this.camera.videoHeight;const s=i.width/i.height;let e,a,h,n;if(o>s){h=this.camera.videoHeight*s;n=this.camera.videoHeight;e=(this.camera.videoWidth-h)/2;a=0}else{h=this.camera.videoWidth;n=this.camera.videoWidth/s;e=0;a=(this.camera.videoHeight-n)/2}i.getContext("2d").drawImage(this.camera,e,a,h,n,0,0,i.width,i.height);const d=i.toDataURL("image/webp");this.photo.src=d;this.photoTaked.emit(d)}render(){return o("div",null,o("div",{class:"video-container"},o("video",{ref:i=>this.camera=i})),o("img",{ref:i=>this.photo=i}),o("button",{onClick:()=>this.takePhoto()},"Take photo"))}};e.style=s;export{e as camera_preview};
//# sourceMappingURL=p-c1a920d8.entry.js.map