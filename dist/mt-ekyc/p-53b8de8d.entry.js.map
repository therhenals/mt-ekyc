{"version":3,"names":["cameraPreviewCss","CameraPreview","constructor","hostRef","this","test","componentDidLoad","play","stream","navigator","mediaDevices","getUserMedia","video","aspectRatio","facingMode","camera","srcObject","takePhoto","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","base64Image","toDataURL","photo","src","photoTaked","emit","render","h","ref","el","onClick"],"sources":["src/components/camera-preview/camera-preview.css?tag=camera-preview&encapsulation=shadow","src/components/camera-preview/camera-preview.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\nvideo {\n  width: 100%;\n  border-radius: 8px;\n}\n\nimg {\n  width: 100%;\n  border-radius: 8px;\n}\n","import { Component, h, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'camera-preview',\n  styleUrl: 'camera-preview.css',\n  shadow: true,\n})\nexport class CameraPreview {\n  camera: HTMLVideoElement;\n  photo: HTMLImageElement;\n\n  @Event() photoTaked: EventEmitter<string>;\n\n  test = 'hello';\n\n  videoDevices: MediaDeviceInfo[];\n\n  componentDidLoad() {\n    this.play();\n  }\n\n  async play() {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: {\n        aspectRatio: 1.7777777778,\n        facingMode: 'environment',\n      },\n    });\n\n    this.camera.srcObject = stream;\n\n    await this.camera.play();\n  }\n\n  takePhoto() {\n    const canvas = document.createElement('canvas');\n    canvas.width = this.camera.videoWidth;\n    canvas.height = this.camera.videoHeight;\n    canvas.getContext('2d').drawImage(this.camera, 0, 0);\n\n    const base64Image = canvas.toDataURL('image/webp');\n\n    this.photo.src = base64Image;\n\n    this.photoTaked.emit(base64Image);\n  }\n\n  render() {\n    return (\n      <div>\n        <video ref={el => (this.camera = el as HTMLVideoElement)}></video>\n\n        <img ref={el => (this.photo = el as HTMLImageElement)} />\n\n        <button onClick={() => this.takePhoto()}>Take photo</button>\n      </div>\n    );\n  }\n}\n"],"mappings":"kDAAA,MAAMA,EAAmB,2F,MCOZC,EAAa,MAL1B,WAAAC,CAAAC,G,iDAWEC,KAAAC,KAAO,O,CAIP,gBAAAC,GACEF,KAAKG,M,CAGP,UAAMA,GACJ,MAAMC,QAAeC,UAAUC,aAAaC,aAAa,CACvDC,MAAO,CACLC,YAAa,aACbC,WAAY,iBAIhBV,KAAKW,OAAOC,UAAYR,QAElBJ,KAAKW,OAAOR,M,CAGpB,SAAAU,GACE,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQjB,KAAKW,OAAOO,WAC3BJ,EAAOK,OAASnB,KAAKW,OAAOS,YAC5BN,EAAOO,WAAW,MAAMC,UAAUtB,KAAKW,OAAQ,EAAG,GAElD,MAAMY,EAAcT,EAAOU,UAAU,cAErCxB,KAAKyB,MAAMC,IAAMH,EAEjBvB,KAAK2B,WAAWC,KAAKL,E,CAGvB,MAAAM,GACE,OACEC,EAAA,WACEA,EAAA,SAAOC,IAAKC,GAAOhC,KAAKW,OAASqB,IAEjCF,EAAA,OAAKC,IAAKC,GAAOhC,KAAKyB,MAAQO,IAE9BF,EAAA,UAAQG,QAAS,IAAMjC,KAAKa,aAAW,c"}